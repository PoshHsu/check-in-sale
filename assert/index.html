<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="author" content="">
<meta name="created" content="2012-09-13">
<meta name="modified" content="2012年09月29日 (週六) 11時39分27秒">
<title> Prototype</title>
<style type="text/css">
h1{
color:white;
margin:0px;
}
body{
background: #E7EBF2;
margin:0px;
}
hr{
}
.top{
background-color: #3B5998;
margin:0px;
padding:0px;
display:block;
height:55px;
border: solid 0.5px #cccccc;
}
.brand{
padding: 5px 20px 0px;
font-family: "arial", georgia, serif;
font-style: italic;
font-size: 32px;
-webkit-mask-image: -webkit-gradient(linear, left top, left bottom, from(rgba(0,0,0,0.6)), to(#000));
text-shadow: 0 1px 0 black, 0 2px 0 black;
}
</style>
</head>
<body>
    <div id="fb-root"></div>
    <script>
    window.fbAsyncInit = function() {
        FB.init({
         appId  : "280399495394196",
         status : true, // check login status
         cookie : true, // enable cookies to allow the server to  access the session
         xfbml  : true, // parse XFBML
         channelUrl :'http://carpo.terrence-tang.com/channel.html', // channel.html file
         oauth  : true // enable OAuth 2.0
        });
        // Additional initialization code here
    };

// Load the SDK Asynchronously
(function(d){
 var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
 if (d.getElementById(id)) {return;}
 js = d.createElement('script'); js.id = id; js.async = true;
 //js.src = "//connect.facebook.net/en_US/all.js";
 js.src = "//connect.facebook.net/zh_TW/all.js";
 ref.parentNode.insertBefore(js, ref);
 }(document));
</script>
<div class="top">
<h1 class="brand">Facebook Notifycation Silencer</h1>
</div>
<div class="main">
<div id ="btn-login">login</div>
<a href="https://www.facebook.com/dialog/oauth?client_id=280399495394196&redirect_uri=http://carpo.terrence-tang.com&scope=user_status,user_checkins,read_stream,user_birthday">login</a>
<a href="https://www.facebook.com/dialog/oauth?client_id=280399495394196&redirect_uri=http://carpo.terrence-tang.com&scope=publish_checkins,publish_stream,user_status,user_checkins,read_stream,user_birthday">login</a>
</div>
<div id="qrcode">
    <img id="qrcode-img"></img>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <img id="qrcode-img2"></img>
    <br>
    <br>
    <input type="button" id="btn_chinkin" value="chenkin"></input>
</div>
</body>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.4/underscore-min.js"></script>
<script src="http://ajax.cdnjs.com/ajax/libs/backbone.js/0.3.3/backbone-min.js"></script>
<script>
    //init qr code
      $("document").ready(function(){
          var qr_link =11;
          $("#qrcode-img").attr("src",getQRCode("146918241993836", 150, 150));
         $("#qrcode-img2").attr("src",getQRCode("fb://1236238160/checkins", 150, 150));

      })
    //end

   //init chinkin but
   var FBPlugs ={};
   FBPlugs.prototype.checkin = function(pid,message,callback){
      FB.api("me/checkins","post",{coordinates:{latitude:"25.013682",longitude:"121.3039054"},message:"at&t park",place:116440731717551},function(res){ console.log(res)})
   }
   $("#btn-chinkin").click(function(){
     FBPlugs.checkin();
   })

    var loginSuccess = function(){
        $("#btn-login").html("logout")
    }
    var loginFail = function(){
        $("#btn-login").html("login")
    }
    var premision = {scope:'manage_notifications'};
    var loginFB = function(successs, fail, p){
        FB.login(function(response) {
            if (response.authResponse) {
                FB.getLoginStatus(function(response){
                       console.log(response)
                    if (response.authResponse) {
                       success();
                    }
                    else {
                       fail();
                    }
                });
            }
            else {
                fail();
                console.log('User cancelled login or  did not fully authorize.');
            }
        }, {scope:'manage_notifications,publish_stream'});
    }
    $("#btn-login").click(function(){
            loginFB(loginSuccess, loginFail, premision);
            });

   //FB.api("/search?type=place&center=25.013682,121.3039054&distance=1000", function(res){console.log(res)})
   //http://blog.978.tw/2011/04/geolocation.html
//FB.api("me/checkin","post",{from:"terrence",place:{name:"place name",latitude:1000,longitude:20000},message:"this is message"},function(res){ console.log(res)})
//FB.api("me/checkins",

//FB.api("me/checkins","post",{coordinates:{latitude:"25.013682",longitude:"121.3039054"},message:"test",place:142800992448822},function(res){ console.log(res)})
//http://facebook.stackoverflow.com/questions/4697603/cant-checkin-to-facebook-places-by-post-to-api
function getQRCode(content, width, height){
    // 預設寬高為 120x120
    width = !!width ? width : 120 ;
    height = !!height ? height : 120;
    // 編碼
    content = encodeURIComponent(content);
    return 'http://chart.apis.google.com/chart?cht=qr&chl=' + content + '&chs=' + width + 'x' + height;
}

</script>

</html>
